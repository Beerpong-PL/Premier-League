<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zápas 3v3</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }

        .button-section {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .button-section button {
            padding: 10px;
            background-color: #4CAF50; /* Zelené */
            color: white;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }

        .button-section button.red {
            background-color: #f44336; /* Červené */
        }

        table {
            width: 80%;
            margin: 20px auto;
            border-collapse: collapse;
        }

        th, td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: center;
        }
    </style>
</head>
<body>
    <header>
        <h1>Zápas 3v3</h1>
    </header>

    <!-- Sekce pro tři zelená tlačítka -->
    <section class="button-section" id="team1-buttons">
        <!-- Dynamicky doplněno tlačítky týmu 1 -->
    </section>

    <!-- Tabulka statistik -->
    <table>
        <thead>
            <tr>
                <th>Jméno hráče</th>
                <th>Trefené kelímky / Celkový počet hodů</th>
                <th>Procentuální úspěšnost</th>
            </tr>
        </thead>
        <tbody id="team1-stats">
            <!-- Dynamicky doplněno statistikami týmu 1 -->
        </tbody>
    </table>

    <table>
        <thead>
            <tr>
                <th>Jméno hráče</th>
                <th>Trefené kelímky / Celkový počet hodů</th>
                <th>Procentuální úspěšnost</th>
            </tr>
        </thead>
        <tbody id="team2-stats">
            <!-- Dynamicky doplněno statistikami týmu 2 -->
        </tbody>
    </table>

    <!-- Sekce pro tři červená tlačítka -->
    <section class="button-section" id="team2-buttons">
        <!-- Dynamicky doplněno tlačítky týmu 2 -->
    </section>

    <script>
        // Načtení vybraných hráčů z localStorage
        const selectedPlayers = JSON.parse(localStorage.getItem('selectedPlayers')) || {};

        // Data o hráčích
        const players = [
            { id: 1, name: 'Fanda', team: 'BPC Praha' },
            { id: 2, name: 'Saša', team: 'BPC Praha' },
            { id: 3, name: 'Míra', team: 'BPC Praha' },
            { id: 4, name: 'Julča', team: 'BPC Praha' },
            { id: 5, name: 'Fasty', team: 'BPC Praha' },
            { id: 6, name: 'Adam', team: 'BPC Praha' },
            { id: 7, name: 'Dodo', team: 'BPC Votice' },
            { id: 8, name: 'Písa', team: 'BPC Votice' },
            { id: 9, name: 'Buky', team: 'BPC Votice' },
            { id: 10, name: 'Kuba', team: 'BPC Votice' },
            { id: 11, name: 'Terka', team: 'BPC Votice' },
            { id: 12, name: 'Lucka', team: 'BPC Votice' }
        ];

        // Vybraní hráči pro tým 1 a tým 2
        const team1Players = Object.values(selectedPlayers).filter((_, index) => index < 3);
        const team2Players = Object.values(selectedPlayers).filter((_, index) => index >= 3 && index < 6);

        // Statistika hráčů
        const playerStats = {};

        function initializeStats(playerIds) {
            playerIds.forEach(playerId => {
                if (!playerStats[playerId]) {
                    playerStats[playerId] = { hits: 0, throws: 0 };
                }
            });
        }

        function updateStats(playerId, isHit) {
            playerStats[playerId].throws++;
            if (isHit) {
                playerStats[playerId].hits++;
            }
            renderStats();
        }

        function renderStats() {
            const renderTeamStats = (teamStats, playerIds) => {
                teamStats.innerHTML = '';
                playerIds.forEach(playerId => {
                    const player = players.find(p => p.id == playerId);
                    const stats = playerStats[playerId];
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${player.name}</td>
                        <td>${stats.hits} / ${stats.throws}</td>
                        <td>${stats.throws ? ((stats.hits / stats.throws) * 100).toFixed(2) : '0.00'}%</td>
                    `;
                    teamStats.appendChild(row);
                });
            };

            renderTeamStats(document.getElementById('team1-stats'), team1Players);
            renderTeamStats(document.getElementById('team2-stats'), team2Players);
        }

        function renderButtons() {
            const renderTeamButtons = (container, playerIds, isHitButton) => {
                container.innerHTML = '';
                playerIds.forEach(playerId => {
                    const player = players.find(p => p.id == playerId);
                    const button = document.createElement('button');
                    button.textContent = player.name;
                    button.classList.add(isHitButton ? 'green' : 'red');
                    button.addEventListener('click', () => updateStats(playerId, isHitButton));
                    container.appendChild(button);
                });
            };

            renderTeamButtons(document.getElementById('team1-buttons'), team1Players, true);
            renderTeamButtons(document.getElementById('team2-buttons'), team2Players, false);
        }

        // Inicializace
        initializeStats([...team1Players, ...team2Players]);
        renderButtons();
        renderStats();
    </script>
</body>
</html>
